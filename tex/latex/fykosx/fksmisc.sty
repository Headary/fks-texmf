%
% @author Michal Koutný <michal@fykos.cz>
%
% @description Unclassified macros.
%
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{fksmisc}[2011/09/11 FYKOS miscellaneous]

\RequirePackage{paralist}
\RequirePackage{hyperref}

% local bibliography, we can choose the level of heading
\renewenvironment{thebibliography}[2]
     {\expandafter#2{\refname}%\section*{\refname}%
      \@mkboth{\MakeUppercase\refname}{\MakeUppercase\refname}%
      \begin{small}%
      \list{\@biblabel{\@arabic\c@enumiv}}%
           {\settowidth\labelwidth{\@biblabel{#1}}%
	    \itemindent\z@%
            \leftmargin\labelwidth%
            \advance\leftmargin\labelsep%
            \@openbib@code%
            \usecounter{enumiv}%
            \let\p@enumiv\@empty%
            \renewcommand\theenumiv{\@arabic\c@enumiv}}%
      \sloppy%
      \clubpenalty4000%
      \@clubpenalty \clubpenalty%
      \widowpenalty4000%
      \sfcode`\.\@m}%
     {\def\@noitemerr%
       {\@latex@warning{Empty `thebibliography' environment}}%
      \endlist%
      \end{small}}%

% quotation with author
\newcommand\signed[1]{{\leavevmode\unskip\nobreak\hfil\penalty50\hskip2em
  \hbox{}\nobreak\hfil(#1)%
  \parfillskip=0pt \finalhyphendemerits=0 \endgraf}}

\newsavebox\quotebox
\newenvironment{aquote}[1]
  {\savebox\quotebox{#1}\begin{quote}}
  {\signed{\usebox\quotebox}\end{quote}}

% handy macros
\newcommand\mail[1]{\href{mailto:#1}{\nolinkurl{#1}}}
\newcommand\uv[1]{„#1“}					% czech quotation
\newcommand\plural[4]{%
  \ifcase#1 % 0
  #4%
  \or% 1
  #2%
  \or% 2
  #3%
  \or% 3
  #3%
  \or% 4
  #3%
  \else% >4
  #4%
  \fi%
}

