%
% @author Michal Koutn√Ω <michal@fykos.cz>
%
% @description Table macros, especially for typesetting results table.
%              To preprocess CSV data use makefile target results/*.tex.
%
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{fkstables}[2011/09/11 FYKOS tables]

\RequirePackage{booktabs}
\RequirePackage{tabularx}
\RequirePackage{dcolumn}
\RequirePackage{multirow}
\RequirePackage{rotating}


% used to style whole rows or rows and columns combined
% example header: \begin{tabular}{x{\bfseries}rA{\itshape}l^l^r^r^r^r^r^r^r^rA{\bfseries}rA{\itshape}rA{\bfseries}r}
%                 to highlight row use \rowstyle{<style>}
\newcolumntype{+}{>{\global\let\currentrowstyle\relax}}
\newcolumntype{x}[1]{>{\global\let\currentrowstyle\relax#1}}
\newcolumntype{^}{>{\currentrowstyle}}
\newcolumntype{A}[1]{>{\currentrowstyle#1}}
\newcommand{\rowstyle}[1]{\gdef\currentrowstyle{#1}%
  #1\ignorespaces
}

% for decimal numbers
\newcolumntype{d}[1]{D{.}{,}{#1}}

\met@resultscols % this defines new column type as in fksmeta

\newcommand\resultstab[1]{%
\begin{center}
\small
\setlength{\tabcolsep}{2pt}
\begin{tabularx}{\textwidth}{T} % batch, percent, sum
\rowstyle{\bfseries}
\met@resultsheader
\input{results/#1.tex} %TODO path
\end{tabularx}
\end{center}
}