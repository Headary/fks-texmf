%
% @author Michal Koutný <michal@fykos.cz>
%
% @description Informations about single seminars. Keeps the
%              LaTeX classes generic.
%
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{fksmeta}[2011/09/11 Information about seminars]

\newcommand\metavar[1]{%
  \expandafter\ifx\csname met@#1\endcsname\relax
  \PackageWarning{fksmeta}{Undefined variable #1}
  \else
  \expandafter\csname met@#1\endcsname\fi
}
\newcommand\FYKOS{{FYKOS}}
\newcommand\VYFUK{{Výfuk}}
\newcommand\met@headername{Name displayed in the header}
\newcommand\met@shortname{Short name of the contest}
\newcommand\met@volumeid{Identification of the volume}
\newcommand\met@address{Contact address}
\newcommand\met@licence{Licence}
\newcommand\metaprobletter[1]{\expandafter \@metaprobletter \csname c@#1\endcsname}
\newcommand\@metaprobletter[1]{\ifcase #1 \or 1\or 2\or 3\or 4\or 5\or P\or E\or S\else \@ctrerr\fi}
\newcommand\metayear[1]{\Roman{#1}}
\newcommand\met@headerproblems{Zadání \Roman{batch}. série}
\newcommand\met@headersolutions{Řešení \Roman{solvedbatch}. série}
\newcommand\met@headerseries[1]{Seriál: #1}
\newcommand\met@headerresults{Pořadí řešitelů po \Roman{solvedbatch}. sérii}
\renewcommand\maketitle{}
%pro potreby rocenky
\newcommand\met@headeryeartoc{Obsah}
\newcommand\met@headeryearintro{Předmluva}
\newcommand\met@headeryeartheorproblems{Zadání teoretických úloh}
\newcommand\met@headeryeartheorsolutions{Řešení teoretických úloh}
\newcommand\met@headeryearexpproblems{Zadání experimentálních úloh}
\newcommand\met@headeryearexpsolutions{Řešení experimentálních úloh}
\newcommand\met@headeryearseries[1]{Seriál o #1}
\newcommand\met@headeryearserieschapter[1]{Kapitola \arabic{serieschapter}: #1}
\newcommand\met@headeryearseriessolutionsbasic{Řešení úloh ze seriálu}%bez obrazku pro bookmark
\newcommand\met@headeryearseriessolutions{\met@headeryearseriessolutionsbasic}
\newcommand\met@headeryearresults{Pořadí nejlepších řešitelů}
\newcommand\met@headeryearresultsall{Pořadí řešitelů}
\newcommand\met@headeryearevents{Akce semináře}%FYKOSu || VYFUKu
%authors page
\newcommand\autor@serialu{}
\newcommand\n@zevserialu{} % přiklad: "Seriál o astrofyzice"

\newcommand\autorserialu[1]{
\renewcommand\autor@serialu{#1}
}
\newcommand\nazevserialu[1]{
\renewcommand\n@zevserialu{#1}
}

\newcommand\met@ownauthorspage{}
\newcommand\ownauthorspage[1]{
\renewcommand\met@ownauthorspage{#1}
}

\newcommand\met@authorspage{
\met@ownauthorspage
\bigskip
}


% results table parameter
\newcommand\met@probheader{1 & 2 & 3 & 4 & 5 & P & E & S} % results table problems header
\newcommand\met@resultscols{\newcolumntype{T}{x{\bfseries}rA{\itshape}p{0.22\textwidth}^X% order, name, school
^r^r^r^r^r^r^r^r%points columns
@{\hspace{12pt}}A{\bfseries}r@{\hspace{8pt}}A{\itshape}r@{\hspace{8pt}}A{\bfseries}r}} % batch, percent, sum

\newcommand\met@resultsheader{& {\normalfont\bfseries jméno} & škola & %
\met@probheader & %
\Roman{solvedbatch} & \textnormal{\%} & $\Sigma$ \\}


% FYKOS
\DeclareOption{fykos}{%  
  \renewcommand\met@headername{Fyzikální korespondenční seminář MFF UK}
  \renewcommand\met@shortname{FYKOS}
  \renewcommand\met@volumeid{ročník \metayear{year}\qquad číslo \arabic{batch}/7}
  \renewcommand\met@headerproblems{\centering \includegraphics{logo1.eps}\hspace{10pt}\raisebox{0.6cm}{Zadání \Roman{batch}. série}\hspace{10pt}\includegraphics{logo8.eps}}
  \renewcommand\met@headersolutions{\centering \includegraphics{logo2.eps}\hspace{10pt}\raisebox{0.6cm}{Řešení \Roman{solvedbatch}. série}}
  \renewcommand\met@headerseries[1]{\centering \includegraphics{logo3.eps}\hspace{10pt}\raisebox{0.6cm}{Seriál: #1}}
  \renewcommand\met@headerresults{\centering \includegraphics{logo7.eps}\hspace{10pt}\raisebox{0.6cm}{Pořadí řešitelů po \Roman{solvedbatch}. sérii}\hspace{10pt}\includegraphics{logo8.eps}}
%pro potreby rocenky
\renewcommand\met@headeryeartoc{\centering \includegraphics{logo1.eps}\hspace{10pt}\raisebox{0.6cm}{Obsah}}
\renewcommand\met@headeryearintro{\centering \includegraphics{logo8.eps}\hspace{10pt}\raisebox{0.6cm}{Předmluva}}
\renewcommand\met@headeryeartheorproblems{\centering \includegraphics{logo1.eps}\hspace{10pt}\raisebox{0.6cm}{Zadání teoretických úloh}}
\renewcommand\met@headeryeartheorsolutions{\centering \includegraphics{logo2.eps}\hspace{10pt}\raisebox{0.6cm}{Řešení teoretických úloh}}
\renewcommand\met@headeryearexpproblems{\centering \includegraphics{logo1.eps}\hspace{10pt}\raisebox{0.6cm}{Zadání experimentálních úloh}}
\renewcommand\met@headeryearexpsolutions{\centering \includegraphics{logo4.eps}\hspace{10pt}\raisebox{0.6cm}{Řešení experimentálních úloh}}
\renewcommand\met@headeryearseries[1]{\centering \includegraphics{logo3.eps}\hspace{10pt}\raisebox{0.6cm}{#1}}
\renewcommand\met@headeryearserieschapter[1]{Kapitola \arabic{serieschapter}: #1}
\renewcommand\met@headeryearseriessolutionsbasic{Řešení úloh ze seriálu}%bez obrazku pro bookmark
\renewcommand\met@headeryearseriessolutions{\centering \includegraphics{logo3.eps}\hspace{10pt}\raisebox{0.6cm}{\met@headeryearseriessolutionsbasic}}
\renewcommand\met@headeryearresults{\centering \includegraphics{logo7.eps}\hspace{10pt}\raisebox{0.6cm}{Pořadí nejlepších řešitelů}}
\renewcommand\met@headeryearresultsall{\centering 
\includegraphics{logo7.eps}\hspace{10pt}\raisebox{0.6cm}{Pořadí řešitelů}}
\renewcommand\met@headeryearevents{\centering 
\includegraphics{logo6.eps}\hspace{10pt}\raisebox{0.6cm}{Akce FYKOSu}}

%authors page
\newcommand\podzimni@soustredeni{} % legenda
\newcommand\jarni@soustredeni{} % legenda

\newcommand\podzimnisoustredeni[1]{
\renewcommand\podzimni@soustredeni{#1}
}
\newcommand\jarnisoustredeni[1]{
\renewcommand\jarni@soustredeni{#1}
}

\renewcommand\met@authorspage{
\textit{\n@zevserialu:} \autor@serialu\par
\textit{Legenda podzimního soustředění:} \podzimni@soustredeni\par
\textit{Legenda jarního soustředění:} \jarni@soustredeni\par
\met@ownauthorspage
\bigskip
}


  \renewcommand\met@address{%
\begin{tabular}{r>{\slshape\bfseries}l}
  \multirow{5}{*}{\includegraphics{logo5.eps}} & \FYKOS \\
  & UK v Praze, Matematicko-fyzikální fakulta\\
  & Ústav teoretické fyziky\\
  & V Holešovičkách 2\\
  & 180\,00 Praha 8\\
\noalign{\smallskip}
  www: & \normalfont\url{http://fykos.cz}\\
  e-mail: & \normalfont\mail{fykos@fykos.cz}\\
\end{tabular}\ifyearbook\relax\else
\nopagebreak\smallskip

{\sffamily\FYKOS{} je také na Facebooku \raisebox{-0.2\baselineskip}{%
\opt{web}{\includegraphics[height=\baselineskip]{color/fb_logo.eps}}%
\opt{print}{\includegraphics[height=\baselineskip]{fb_logo.eps}}%
}\nopagebreak

\href{http://www.facebook.com/Fykos}{\bfseries\slshape http://www.facebook.com/Fykos}}\fi
}
\renewcommand\met@licence{
Fyzikální korespondenční seminář je organizován studenty MFF~UK.
Je zastřešen Oddělením pro vnější vztahy a~propagaci MFF~UK 
a~podporován Ústavem teoretické fyziky\\
MFF~UK, jeho zaměstnanci a~Jednotou českých matematiků a~fyziků.
\nopagebreak\medskip

\footnotesize Toto dílo je šířeno pod licencí Creative Commons 
Attribution-Share Alike 3.0 Unported.\\
Pro zobrazení kopie této licence, navštivte 
\url{http://creativecommons.org/licenses/by-sa/3.0/}.\par
}

% to have initialized counters
\AtBeginDocument{
\hypersetup{
    pdftitle=\ifyearbook{Ročenka FYKOSu, \Roman{year}. ročník}\else{FYKOS, \Roman{year}. ročník, \arabic{batch}. číslo}\fi,    % title
    pdfauthor={Organizátoři FYKOSu <fykos@fykos.cz>},     % author
    pdfsubject={Fyzikální korespondenční seminář MFF UK},   % subject of the document
}}} % end FYKOS


% --- VÝFUK ---
\DeclareOption{vyfuk}{%  
  \renewcommand\met@headername{VÝpočty Fyzikálních ÚKolů -- kores. sem. MFF UK pro ZŠ}
  \renewcommand\met@shortname{Výfuk}
  \renewcommand\@metaprobletter[1]{\ifcase #1 \or 1\or 2\or 3\or 4\or E\or C\else \@ctrerr\fi}
  \renewcommand\metayear[1]{\ifthenelse{\equal{\value{#1}}{1}}{1\textpm1}{\Roman{#1}}}
  \renewcommand\met@volumeid{ročník \metayear{year}\qquad číslo \arabic{batch}/7}
%  \renewcommand\met@headerproblems{\centering Zadání \Roman{batch}. série}

  \renewcommand\met@headerproblems{\centering 
\includegraphics[width=23mm]{tabule2.eps}\hspace{20pt}\raisebox{0.6cm}
{Zadání \Roman{batch}. série}
\hspace{20pt}\includegraphics[width=23mm]{plazmaL.eps}
}
%  \renewcommand\met@headersolutions{\centering Řešení \Roman{solvedbatch}. série}
  \renewcommand\met@headersolutions{\centering 
\includegraphics[width=23mm]{tabule.eps}\hspace{20pt}\raisebox{0.6cm}
{Řešení \Roman{solvedbatch}. série}
\hspace{20pt}\includegraphics[width=23mm]{zarovkaL.eps}
}
%  \renewcommand\met@headerseries[1]{\centering Výfučtení: #1}
  \renewcommand\met@headerseries[1]{\centering 
\includegraphics[width=23mm]{kniha.eps}\hspace{20pt}\raisebox{0.6cm}
{Výfučtení: #1}
}
% \renewcommand\met@headerresults{\centering Pořadí řešitelů po \Roman{solvedbatch}. sérii}
  \renewcommand\met@headerresults{\centering 
\includegraphics[width=23mm]{stupne123.eps}\hspace{20pt}\raisebox{0.6cm}
{Pořadí řešitelů po \Roman{solvedbatch}. sérii}
%\hspace{20pt}\includegraphics[width=23mm]{zmrzlina.eps}
}
  %pro potreby rocenky (TODO seriál->Výfučtení)
\renewcommand\met@headeryeartoc{\centering \includegraphics[scale=0.5]{vyfuk_vyfuk.eps}\hspace{10pt}\raisebox{0.6cm}{Obsah}}
\renewcommand\met@headeryearintro{\centering \includegraphics{logo8.eps}\hspace{10pt}\raisebox{0.6cm}{Předmluva}}
\renewcommand\met@headeryeartheorproblems{\centering \includegraphics[scale=0.35]{vyfuk_rovnice-pretahovani.eps}\hspace{10pt}\raisebox{0.3cm}{Zadání teoretických úloh}}
\renewcommand\met@headeryeartheorsolutions{\centering \includegraphics[scale=0.35]{vyfuk_rovnice-pretahovani.eps}\hspace{10pt}\raisebox{0.3cm}{Řešení teoretických úloh}}
\renewcommand\met@headeryearexpproblems{\centering \includegraphics[scale=0.16]{vyfuk_raketa.eps}\hspace{10pt}\raisebox{0.6cm}{Zadání experimentálních úloh}}
\renewcommand\met@headeryearexpsolutions{\centering \includegraphics[scale=0.16]{vyfuk_raketa.eps}\hspace{10pt}\raisebox{0.6cm}{Řešení experimentálních úloh}}
\renewcommand\met@headeryearseries[1]{\centering \includegraphics[scale=0.07]{vyfuk_kvetinac.pdf}\hspace{10pt}\raisebox{0.6cm}{Výfučtení}} %parametr z duvodu genericity
\renewcommand\met@headeryearserieschapter[1]{Kapitola \arabic{serieschapter}: #1}
\renewcommand\met@headeryearseriessolutionsbasic{Řešení úloh z výfučtení}%bez obrazku pro bookmark
\renewcommand\met@headeryearseriessolutions{\centering \includegraphics[scale=0.07]{vyfuk_kvetinac.pdf}\hspace{10pt}\raisebox{0.6cm}{\met@headeryearseriessolutionsbasic}}
\renewcommand\met@headeryearresults{\centering \includegraphics[scale=0.5]{vyfuk_vyfuk.eps}\hspace{10pt}\raisebox{0.6cm}{Pořadí nejlepších řešitelů}}
\renewcommand\met@headeryearresultsall{\centering \includegraphics[scale=0.5]{vyfuk_vyfuk.eps}\hspace{10pt}\raisebox{0.6cm}{Pořadí řešitelů}}
\renewcommand\met@headeryearevents{\centering \includegraphics[scale=0.4]{vyfuk-schlitt.eps}\hspace{10pt}\raisebox{0.6cm}{Akce Výfuku}}

%authors page
\newcommand\t@bor{}
\newcommand\tabor[1]{
\renewcommand\t@bor{#1}
}

\renewcommand\met@authorspage{
\textit{Legenda tábora:} \t@bor\par
\met@ownauthorspage
\bigskip
}


  \fancypagestyle{titlepage}{
    \newgeometry{head=0pt,headsep=0pt,margin=0.7cm,includeheadfoot}
    \renewcommand{\headrulewidth}{0pt}
    \lhead{}
    \chead{}
    \rhead{}
}
  \renewcommand\maketitle{%    
    \thispagestyle{titlepage}{\setlength{\parindent}{0pt}
    \includegraphics[width=\textwidth,trim=5.1pt 0 0 0]{vyfuk_logo.eps}

    {\bfseries\sffamily \met@headername{} \hfill \met@volumeid}

    \rule[10pt]{\textwidth}{3pt}}
    \vspace{-1cm}
  }

  \renewcommand\met@address{%
\begin{tabular}{r>{\slshape\bfseries}l}
  \multirow{5}{*}{\includegraphics[width=2cm]{NB.eps}} 
  & \VYFUK \\
  %\multirow{5}{*}{} & \FYKOS{} -- Výfuk\\
  & UK v Praze, Matematicko-fyzikální fakulta\\
%  & Katedra didaktiky fyziky\\
  & V Holešovičkách 2\\
  & 180\,00 Praha 8\\
\noalign{\smallskip}
  www: & \normalfont\url{http://vyfuk.fykos.cz}\\
%  \ifnum\theyear<3 e-mail pro řešení: & \normalfont\mail{vyfuk-reseni@fykos.cz}\\\fi
  e-mail: & \normalfont\mail{vyfuk@fykos.cz}\\
\end{tabular}
\nopagebreak\smallskip

{\sffamily\VYFUK{} je také na Facebooku \raisebox{-0.2\baselineskip}{%
\opt{web}{\includegraphics[height=\baselineskip]{color/fb_logo.eps}}%
\opt{print}{\includegraphics[height=\baselineskip]{fb_logo.eps}}%
}\nopagebreak

\href{http://www.facebook.com/ksvyfuk}{\bfseries\slshape http://www.facebook.com/ksvyfuk}}
}
 
\renewcommand\met@licence{
Fyzikální korespondenční seminář je organizován studenty MFF~UK.
Je zastřešen Oddělením pro vnější vztahy a~propagaci MFF~UK 
a~podporován Katedrou didaktiky fyziky\\
MFF~UK, jeho zaměstnanci %a~Jednotou českých matematiků a~fyziků
.
\nopagebreak\medskip

\footnotesize Toto dílo je šířeno pod licencí Creative Commons 
Attribution-Share Alike 3.0 Unported.\\
Pro zobrazení kopie této licence, navštivte 
\url{http://creativecommons.org/licenses/by-sa/3.0/}.\par
}

% results table parameter
\renewcommand\met@probheader{1 & 2 & 3 & 4 & E & C} % results table problems header
\renewcommand\met@resultscols{\newcolumntype{T}{x{\bfseries}rA{\itshape}p{0.22\textwidth}^X% order, name, school
^r^r^r^r^r^r%points columns
@{\hspace{12pt}}A{\bfseries}r@{\hspace{8pt}}A{\itshape}r@{\hspace{8pt}}A{\bfseries}r}} % batch sum, sum

\renewcommand\met@resultsheader{& {\normalfont\bfseries jméno} & škola & %
\met@probheader & %
\Roman{solvedbatch} & \textnormal{\%} & $\Sigma$ \\}

% to have initialized counters
\AtBeginDocument{
\ifyearbook
\nazevserialu{Výfučtení} %pro zachovani genericity maker (ovlivnuje vysazeni nazvu bookmarku)
\fi
\hypersetup{    
    pdftitle=\ifyearbook{Ročenka Výfuku, \Roman{year}. ročník}\else{Výfuk, \Roman{year}. ročník, \arabic{batch}. číslo}\fi,    % tady radši Roman
    pdfauthor={Organizátoři Výfuku <vyfuk@fykos.cz>},     % author
    pdfsubject={Fyzikální korespondenční seminář MFF UK pro ZŠ},   % subject of the document
}}} % end VÝFUK




\ProcessOptions\relax
